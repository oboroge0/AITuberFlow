{
  "id": "lip-sync",
  "name": "Lip Sync",
  "version": "1.0.0",
  "description": "Generates lip sync data from audio for avatar mouth animation",
  "author": {
    "name": "AITuberFlow",
    "url": "https://github.com/aituberflow"
  },
  "license": "MIT",
  "category": "avatar",
  "node": {
    "inputs": [
      {
        "id": "audio",
        "type": "audio",
        "description": "Audio data (WAV/PCM bytes)"
      },
      {
        "id": "audioUrl",
        "type": "string",
        "description": "Path or URL to audio file"
      }
    ],
    "outputs": [
      {
        "id": "mouth_values",
        "type": "array",
        "description": "Array of mouth open values over time"
      },
      {
        "id": "duration",
        "type": "number",
        "description": "Audio duration in seconds"
      },
      {
        "id": "audio",
        "type": "audio",
        "description": "Pass-through of input audio"
      }
    ],
    "events": {
      "emits": ["avatar.mouth"]
    }
  },
  "config": {
    "method": {
      "type": "select",
      "label": "Lip Sync Method",
      "description": "Method to use for lip sync generation",
      "options": [
        { "label": "Volume-based (Simple)", "value": "volume" },
        { "label": "Envelope Following", "value": "envelope" }
      ],
      "default": "volume"
    },
    "sensitivity": {
      "type": "number",
      "label": "Sensitivity",
      "description": "How much the mouth opens relative to audio volume. Higher = more movement. (1.0 - 10.0)",
      "default": 5.0,
      "min": 1.0,
      "max": 10.0
    },
    "smoothing": {
      "type": "number",
      "label": "Smoothing",
      "description": "Smoothing factor for mouth movement. Higher = smoother but slower response. (0.0 - 0.9)",
      "default": 0.3,
      "min": 0.0,
      "max": 0.9
    },
    "threshold": {
      "type": "number",
      "label": "Threshold",
      "description": "Minimum volume to trigger mouth movement. Filters out background noise. (0.0 - 0.2)",
      "default": 0.02,
      "min": 0.0,
      "max": 0.2
    },
    "emit_realtime": {
      "type": "boolean",
      "label": "Emit Realtime Events",
      "description": "Emit avatar.mouth events in realtime during playback",
      "default": true
    },
    "frame_rate": {
      "type": "number",
      "label": "Frame Rate",
      "description": "Number of mouth updates per second",
      "default": 30,
      "min": 10,
      "max": 60
    }
  },
  "dependencies": {
    "python": []
  }
}
