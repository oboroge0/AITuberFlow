{
  "id": "template-vtube-studio-vtuber",
  "name": "VTube Studio VTuber",
  "name_ja": "VTube Studio VTuber",
  "description": "VTuber workflow using VTube Studio for avatar control: Input -> LLM -> TTS -> VTube Studio (lip sync & expressions)",
  "description_ja": "VTube Studioでアバター制御するVTuberワークフロー：入力 → LLM → TTS → VTube Studio（リップシンク＆表情）",
  "nodes": [
    {
      "id": "node-input",
      "type": "manual-input",
      "position": { "x": 100, "y": 250 },
      "config": {
        "placeholder": "メッセージを入力...",
        "inputText": "こんにちは！今日の調子はどう？"
      }
    },
    {
      "id": "node-llm",
      "type": "openai-llm",
      "position": { "x": 350, "y": 250 },
      "config": {
        "apiKey": "",
        "model": "gpt-4o-mini",
        "systemPrompt": "あなたは明るいバーチャルストリーマーです。フレンドリーで元気な話し方をします。返答は100文字以内で、感情を豊かに表現してください。",
        "temperature": 0.8,
        "maxTokens": 128
      }
    },
    {
      "id": "node-emotion",
      "type": "emotion-analyzer",
      "position": { "x": 600, "y": 150 },
      "config": {
        "method": "rule-based",
        "language": "auto",
        "emit_events": true
      }
    },
    {
      "id": "node-tts",
      "type": "voicevox-tts",
      "position": { "x": 600, "y": 350 },
      "config": {
        "host": "http://localhost:50021",
        "speaker": 1,
        "speedScale": 1.0
      }
    },
    {
      "id": "node-lipsync",
      "type": "lip-sync",
      "position": { "x": 850, "y": 350 },
      "config": {
        "method": "volume",
        "sensitivity": 5.0,
        "smoothing": 0.3,
        "threshold": 0.02,
        "emit_realtime": true,
        "frame_rate": 30
      }
    },
    {
      "id": "node-audio",
      "type": "audio-player",
      "position": { "x": 1100, "y": 350 },
      "config": {
        "wait_for_completion": true,
        "volume": 1.0,
        "output_device": "browser"
      }
    },
    {
      "id": "node-subtitle",
      "type": "subtitle-display",
      "position": { "x": 850, "y": 150 },
      "config": {
        "style": "default",
        "position": "bottom-center",
        "font_size": 28,
        "font_color": "#ffffff",
        "background_color": "rgba(0, 0, 0, 0.7)",
        "animation": "fade"
      }
    },
    {
      "id": "node-avatar",
      "type": "avatar-configuration",
      "position": { "x": 1100, "y": 150 },
      "config": {
        "renderer": "vtube-studio",
        "vtube_port": 8001,
        "vtube_mouth_param": "MouthOpen",
        "vtube_expression_map": "{\"happy\": \"Happy\", \"sad\": \"Sad\", \"angry\": \"Angry\", \"surprised\": \"Surprised\", \"relaxed\": \"Relaxed\", \"neutral\": \"Neutral\"}"
      }
    }
  ],
  "connections": [
    {
      "id": "conn-1",
      "from": { "nodeId": "node-input", "port": "text" },
      "to": { "nodeId": "node-llm", "port": "prompt" }
    },
    {
      "id": "conn-2",
      "from": { "nodeId": "node-llm", "port": "response" },
      "to": { "nodeId": "node-emotion", "port": "text" }
    },
    {
      "id": "conn-3",
      "from": { "nodeId": "node-llm", "port": "response" },
      "to": { "nodeId": "node-tts", "port": "text" }
    },
    {
      "id": "conn-4",
      "from": { "nodeId": "node-tts", "port": "audio" },
      "to": { "nodeId": "node-lipsync", "port": "audio" }
    },
    {
      "id": "conn-5",
      "from": { "nodeId": "node-lipsync", "port": "audio" },
      "to": { "nodeId": "node-audio", "port": "audio" }
    },
    {
      "id": "conn-6",
      "from": { "nodeId": "node-lipsync", "port": "duration" },
      "to": { "nodeId": "node-audio", "port": "duration" }
    },
    {
      "id": "conn-7",
      "from": { "nodeId": "node-emotion", "port": "text" },
      "to": { "nodeId": "node-subtitle", "port": "text" }
    }
  ],
  "setup_instructions": {
    "vtube_studio": [
      "1. VTube Studioを起動してモデルを読み込む",
      "2. 設定 > プラグインAPIで「プラグインAPIアクセスを許可」を有効にする",
      "3. 表情のホットキーを作成: Happy, Sad, Angry, Surprised, Relaxed, Neutral",
      "4. アバター設定の表情マップをホットキー名に合わせて更新",
      "5. ワークフローを実行 - VTube Studioでプラグイン接続を許可"
    ],
    "voicevox": [
      "1. VOICEVOXをポート50021で起動",
      "2. TTSノードで話者IDを設定"
    ]
  }
}
